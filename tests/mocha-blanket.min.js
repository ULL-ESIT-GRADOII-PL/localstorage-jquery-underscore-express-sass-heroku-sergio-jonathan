!function(){if(!mocha)throw new Exception("mocha library does not exist in global namespace!");var OriginalReporter=mocha._reporter,BlanketReporter=function(runner){runner.on("start",function(){blanket.setupCoverage()}),runner.on("end",function(){blanket.onTestsDone()}),runner.on("suite",function(){blanket.onModuleStart()}),runner.on("test",function(){blanket.onTestStart()}),runner.on("test end",function(test){blanket.onTestDone(test.parent.tests.length,"passed"===test.state)}),new OriginalReporter(runner)};BlanketReporter.prototype=OriginalReporter.prototype,mocha.reporter(BlanketReporter);var oldRun=mocha.run,oldCallback=null;mocha.run=function(finishCallback){oldCallback=finishCallback,console.log("waiting for blanket...")},blanket.beforeStartTestRunner({callback:function(){blanket.options("existingRequireJS")||oldRun(oldCallback),mocha.run=oldRun}})}();